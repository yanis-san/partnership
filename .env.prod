# ============================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Plateforme d'Affiliation Torii
# ============================================
# IMPORTANT: Ne jamais commiter ce fichier dans Git!
# Ajouter .env dans .gitignore

# ============================================
# DJANGO CONFIGURATION
# ============================================
DEBUG=False
SECRET_KEY=votre-super-secret-key-genere-avec-django-core-management-utils-get_random_secret_key
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,api.yourdomain.com

# ============================================
# ADMIN URL (UUID pour sécurité)
# ============================================
# Générer un UUID: python -c "import uuid; print(uuid.uuid4())"
ADMIN_URL=admin-a1b2c3d4e5f6g7h8i9j0k1l2m3n4/

# ============================================
# BASE DE DONNÉES (PostgreSQL recommandé)
# ============================================
# Format PostgreSQL: postgresql://user:password@host:port/dbname
# Pour Heroku: DATABASE_URL est automatique
DATABASE_URL=postgresql://torii_user:your-strong-password@db.yourdomain.com:5432/torii_db

# ============================================
# EMAIL CONFIGURATION
# ============================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-specific-password

# Alternative: utiliser SendGrid
# EMAIL_BACKEND=sendgrid_backend.SendgridBackend
# SENDGRID_API_KEY=your-sendgrid-api-key

DEFAULT_FROM_EMAIL=noreply@instituttorii.com

# ============================================
# ADMIN NOTIFICATIONS
# ============================================
ADMIN_NAME=Administrateur Principal
ADMIN_EMAIL=admin@instituttorii.com

# ============================================
# SÉCURITÉ - HTTPS/SSL
# ============================================
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline' cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:;

# Cookies plus sécurisés
SESSION_COOKIE_HTTPONLY=True
CSRF_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax
CSRF_COOKIE_SAMESITE=Lax

# Durée de session (en secondes)
SESSION_COOKIE_AGE=86400  # 24 heures

# ============================================
# WHITENOISE & STATIQUES
# ============================================
STATIC_URL=/static/
STATIC_ROOT=/app/staticfiles/

# Compression WhiteNoise
WHITENOISE_COMPRESS=True
WHITENOISE_AUTOREFRESH=False
WHITENOISE_MAX_AGE=31536000  # 1 an pour les fichiers hashés

# ============================================
# MEDIA FILES (Uploads)
# ============================================
MEDIA_URL=/media/
MEDIA_ROOT=/app/media/

# Alternative: Stockage sur AWS S3
# USE_S3=True
# AWS_STORAGE_BUCKET_NAME=your-bucket-name
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_S3_REGION_NAME=eu-west-1

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
# Optionnel: LOG_FILE=/var/log/torii/django.log

# ============================================
# SENTRY (Error tracking - optionnel)
# ============================================
# SENTRY_DSN=https://your-key@sentry.io/your-project-id

# ============================================
# CACHE (optionnel pour haute performance)
# ============================================
# CACHE_BACKEND=redis://redis:6379/0
# SESSION_CACHE_ALIAS=default

# ============================================
# TIMEZONE & LOCALISATION
# ============================================
LANGUAGE_CODE=fr-fr
TIME_ZONE=Africa/Algiers

# ============================================
# RATE LIMITING (optionnel)
# ============================================
# RATELIMIT_ENABLE=True
# RATELIMIT_VIEW_REQUESTS=100
# RATELIMIT_VIEW_PERIOD=3600  # 1 heure

# ============================================
# MAINTENANCE MODE
# ============================================
MAINTENANCE_MODE=False
MAINTENANCE_MODE_IGNORE_ADMIN_SITE=True
MAINTENANCE_MODE_IGNORE_ANONYMOUS_USER=False

# ============================================
# ALLOWED FILE UPLOADS
# ============================================
# Taille max d'upload (en bytes)
FILE_UPLOAD_MAX_MEMORY_SIZE=5242880  # 5 MB
DATA_UPLOAD_MAX_MEMORY_SIZE=5242880   # 5 MB

# Extensions autorisées pour les reçus
ALLOWED_UPLOAD_EXTENSIONS=jpg,jpeg,png,pdf,gif

# ============================================
# CDN (optionnel pour les statiques)
# ============================================
# CDN_URL=https://cdn.yourdomain.com
# DJANGO_STATIC_HOST=https://cdn.yourdomain.com

# ============================================
# SÉCURITÉ ADDITIONNELLE
# ============================================
# Désactiver les navigateurs anciens
SECURE_HSTS_SECONDS=31536000  # 1 an
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# X-Frame-Options (contre les clickjacking)
X_FRAME_OPTIONS=DENY

# ============================================
# STRIPE/PAIEMENT (si utilisé à l'avenir)
# ============================================
# STRIPE_PUBLIC_KEY=pk_live_your_key
# STRIPE_SECRET_KEY=sk_live_your_key

# ============================================
# API KEYS EXTERNES
# ============================================
# Ajouter ici toute autre clé API sécurisée
